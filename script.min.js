document.addEventListener('DOMContentLoaded', () => { console.log('Dharma Dairy & Veg - Premium Web Loaded'); }); function toggleMobileMenu() { const nav = document.querySelector('.desktop-nav'); if (nav.style.display === 'flex') { nav.style.display = 'none'; } else { nav.style.display = 'flex'; nav.style.flexDirection = 'column'; nav.style.position = 'absolute'; nav.style.top = '70px'; nav.style.right = '20px'; nav.style.backgroundColor = 'var(--white)'; nav.style.padding = '20px'; nav.style.borderRadius = '10px'; nav.style.boxShadow = '0 4px 20px rgba(0,0,0,0.1)'; } } let cart = JSON.parse(localStorage.getItem('dharmaCart')) || []; function addToCart(product, event) { cart.push(product); localStorage.setItem('dharmaCart', JSON.stringify(cart)); showCartToast(product); animateCartIcon(); if (event && event.target) { createFlyingProduct(event.target, product); } updateCartBadge(); } function showCartToast(product) { const existingToast = document.querySelector('.cart-toast'); if (existingToast) { existingToast.remove(); } const toast = document.createElement('div'); toast.className = 'cart-toast'; toast.innerHTML = ` <div class="cart-toast-icon"> <i class="fas fa-check-circle"></i> </div> <div class="cart-toast-content"> <h4>Added to Cart!</h4> <p>${product.name}</p> </div> `; document.body.appendChild(toast); setTimeout(() => { toast.classList.add('hide'); setTimeout(() => toast.remove(), 500); }, 3000); } function animateCartIcon() { const cartIcon = document.querySelector('.actions a[href="cart.html"]'); if (cartIcon) { cartIcon.classList.add('cart-bounce'); setTimeout(() => { cartIcon.classList.remove('cart-bounce'); }, 600); } } function createFlyingProduct(button, product) { const cartIcon = document.querySelector('.actions a[href="cart.html"]'); if (!cartIcon) return; const buttonRect = button.getBoundingClientRect(); const cartRect = cartIcon.getBoundingClientRect(); const flyingEl = document.createElement('div'); flyingEl.className = 'flying-product'; flyingEl.style.left = buttonRect.left + 'px'; flyingEl.style.top = buttonRect.top + 'px'; const productCard = button.closest('.product-card'); const productImg = productCard ? productCard.querySelector('img') : null; if (productImg) { flyingEl.innerHTML = `<img src="${productImg.src}" alt="${product.name}">`; } else { flyingEl.innerHTML = `<div style="width: 60px; height: 60px; background: var(--primary-green); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem;"><i class="fas fa-shopping-bag"></i></div>`; } document.body.appendChild(flyingEl); setTimeout(() => { flyingEl.style.left = cartRect.left + 'px'; flyingEl.style.top = cartRect.top + 'px'; }, 10); setTimeout(() => { flyingEl.remove(); }, 800); } function updateCartBadge() { const cartIcon = document.querySelector('.actions a[href="cart.html"]'); if (!cartIcon) return; const existingBadge = cartIcon.querySelector('.cart-badge'); if (existingBadge) { existingBadge.remove(); } if (cart.length > 0) { const badge = document.createElement('span'); badge.className = 'cart-badge'; badge.textContent = cart.length; cartIcon.style.position = 'relative'; cartIcon.appendChild(badge); } } function getCartCount() { return cart.length; } document.addEventListener('DOMContentLoaded', () => { console.log('Dharma Dairy & Veg - Premium Web Loaded'); updateCartBadge(); initTestimonialsCarousel(); }); let currentSlide = 0; let autoPlayInterval = null; function initTestimonialsCarousel() { const track = document.getElementById('testimonialsTrack'); if (!track) return; startAutoPlay(); const carousel = document.getElementById('testimonialsCarousel'); if (carousel) { carousel.addEventListener('mouseenter', stopAutoPlay); carousel.addEventListener('mouseleave', startAutoPlay); } } function startAutoPlay() { stopAutoPlay(); autoPlayInterval = setInterval(() => { moveCarousel(1); }, 5000); } function stopAutoPlay() { if (autoPlayInterval) { clearInterval(autoPlayInterval); autoPlayInterval = null; } } function moveCarousel(direction) { const track = document.getElementById('testimonialsTrack'); const dots = document.querySelectorAll('.carousel-dot'); if (!track || dots.length === 0) return; const totalSlides = dots.length; currentSlide = (currentSlide + direction + totalSlides) % totalSlides; updateCarousel(); } function goToSlide(index) { currentSlide = index; updateCarousel(); } function updateCarousel() { const track = document.getElementById('testimonialsTrack'); const dots = document.querySelectorAll('.carousel-dot'); if (!track) return; track.style.transform = `translateX(-${currentSlide * 100}%)`; dots.forEach((dot, index) => { dot.classList.toggle('active', index === currentSlide); }); } function toggleAccordion(element) { const section = element.closest('.accordion-section'); if (!section) return; section.classList.toggle('active'); } function toggleMobileMenu() { const nav = document.querySelector('.desktop-nav'); const menuIcon = document.querySelector('.mobile-menu-toggle i'); if (nav.style.display === 'flex') { nav.style.display = 'none'; if (menuIcon) menuIcon.className = 'fas fa-bars'; } else { nav.style.display = 'flex'; nav.style.flexDirection = 'column'; nav.style.position = 'absolute'; nav.style.top = '70px'; nav.style.right = '20px'; nav.style.backgroundColor = 'var(--white)'; nav.style.padding = '20px'; nav.style.borderRadius = '10px'; nav.style.boxShadow = '0 4px 20px rgba(0,0,0,0.1)'; if (menuIcon) menuIcon.className = 'fas fa-times'; } }
